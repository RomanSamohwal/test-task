(this["webpackJsonptest-task"]=this["webpackJsonptest-task"]||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),s=n.n(c),a=n(36),o=n.n(a),i=(n(96),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))}),u=n(11),d=n(16),l=n(8),j=n(43),b=n(48),f=n(9),O=n.n(f),h=n(34),p=n(145),x=Object(p.a)(),m=(Object(p.a)(),Object(p.a)(),Object(p.a)()),v=Object(p.a)(),S=[{id:m,name:"Process1",jobsCount:2,startTime:12},{id:v,name:"Process2",jobsCount:3,startTime:13}],g=[{id:x,name:"JobProc1",processId:m,status:"running"},{id:x,name:"JobProc2",processId:v,status:"failed"},{id:x,name:"JobProc3",processId:v,status:"failed"}],w=function(e){localStorage.setItem("processes",JSON.stringify(e))},y=function(e){localStorage.setItem("jobs",JSON.stringify(e))},C=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==localStorage.getItem("processes")){e.next=4;break}return e.abrupt("return",S);case 4:return e.abrupt("return",JSON.parse(localStorage.getItem("processes")));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=Object(l.b)("jobs/fetchJobs",function(){var e=Object(h.a)(O.a.mark((function e(t,n){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,r=n.rejectWithValue,e.prev=1,e.next=4,null===localStorage.getItem("jobs")?g:JSON.parse(localStorage.getItem("jobs"));case 4:return c=e.sent,e.abrupt("return",{jobs:c});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(l.b)("jobs/saveJobs",function(){var e=Object(h.a)(O.a.mark((function e(t,n){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,r=n.rejectWithValue,c=n.getState,e.prev=1,e.delegateYield(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=c(),n=[],t.jobs)t.jobs[r].forEach((function(e){return n.push(e)}));return e.next=5,y(n);case 5:case"end":return e.stop()}}),e)}))(),"t0",3);case 3:e.next=8;break;case 5:e.prev=5,e.t1=e.catch(1),r(e.t1);case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()),R=Object(l.b)("processes/fetchProcesses",function(){var e=Object(h.a)(O.a.mark((function e(t,n){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,r=n.rejectWithValue,n.getState,e.prev=1,e.next=4,C();case 4:return c=e.sent,e.abrupt("return",{processes:c});case 8:e.prev=8,e.t0=e.catch(1),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(l.b)("processes/saveProcess",function(){var e=Object(h.a)(O.a.mark((function e(t,n){var r,c,s,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,r=n.rejectWithValue,c=n.getState,e.prev=1,s=c(),a=s.processes,e.next=6,w(a);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),F=Object(l.c)({name:"processes",initialState:[],reducers:{addProcess:function(e,t){e.unshift(Object(b.a)(Object(b.a)({},t.payload.process),{},{status:t.payload.status}))},deleteProcess:function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))},orderProcess:function(e,t){return t.payload.process},setStatus:function(e,t){return e.map((function(e){return e.id===t.payload.id?Object(b.a)(Object(b.a)({},e),{},{status:t.payload.status}):e}))}},extraReducers:function(e){e.addCase(R.fulfilled,(function(e,t){return t.payload.processes}))}}),P=F.reducer,J=F.actions,M=J.addProcess,E=J.deleteProcess,N=J.orderProcess,A=J.setStatus,B=Object(l.c)({name:"jobs",initialState:{},reducers:{addJobs:function(e,t){e[t.payload.id]=t.payload.jobs},deleteJobs:function(e,t){delete e[t.payload.id]}},extraReducers:function(e){e.addCase(k.fulfilled,(function(e,t){var n,r;null===(n=t.payload)||void 0===n||n.jobs.forEach((function(t){e[t.processId]=[]})),null===(r=t.payload)||void 0===r||r.jobs.forEach((function(t){e[t.processId].unshift(t)}))}))}}),D=B.reducer,L=B.actions,V=L.addJobs,W=L.deleteJobs,U=Object(l.c)({name:"find",initialState:[],reducers:{},extraReducers:function(e){e.addCase(k.fulfilled,(function(e,t){return t.payload.jobs}))}}).reducer,Y=Object(l.c)({name:"app",initialState:{status:"idle",error:null},reducers:{setAppStatus:function(e,t){e.status=t.payload.status}}}),q=Y.reducer,z=Y.actions.setAppStatus,G=Object(d.c)({app:q,processes:P,jobs:D,find:U}),H=Object(l.a)({reducer:G,middleware:function(e){return e().prepend(j.a)}}),K=function(){return Object(u.b)()},Q=n(29),X=n(44),Z=n(143),$=n(45);function _(){var e=Object(X.a)(["\n  width: 100%; \n  min-height: 100vh; \n  display: flex; \n  align-items: center; \n  justify-content: center;\n"]);return _=function(){return e},e}var ee,te=$.a.div(_()),ne=s.a.memo((function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(te,{children:Object(r.jsx)(Z.a,{})})})}));!function(e){e[e.running=0]="running",e[e.successed=1]="successed",e[e.failed=2]="failed"}(ee||(ee={}));var re=function(){for(var e="",t=0;t<8;t++){var n=Math.floor(27*Math.random());e+=String.fromCharCode(97+n)}return e},ce=function(e){var t,n=Object(p.a)(),r=re();switch(Math.floor(3*Math.random())){case 1:t=ee.successed;break;case 2:t=ee.failed;break;default:t=ee.running}return{id:n,name:r,processId:e,status:ae(t)}},se=function(e){var t="undefined status";return e.some((function(e){return"running"===e.status}))&&(t="in progress"),e.every((function(e){return"successed"===e.status}))&&(t="successed"),e.every((function(e){return"failed"===e.status}))&&(t="failed"),t},ae=function(e){var t;switch(e){case 1:t="successed";break;case 2:t="failed";break;default:t="running"}return t},oe=n(89),ie=s.a.memo((function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(oe.a,{type:"primary",onClick:e.onClick,children:e.text})})})),ue=s.a.memo((function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("table",{className:"table",style:{cursor:"pointer"},children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"ID"}),Object(r.jsx)("th",{children:"NAME"}),Object(r.jsx)("th",{children:"PROCESS ID"}),Object(r.jsx)("th",{children:"STATUS"}),Object(r.jsx)("th",{children:Object(r.jsx)(ie,{onClick:function(){e.closeTable()},text:"close"})})]})}),Object(r.jsx)("tbody",{children:e.data.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.id}),Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.processId}),Object(r.jsx)("td",{children:e.status})]},e.id)}))})]})})})),de=n(144).a.Search,le=s.a.memo((function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(de,{placeholder:"find job",allowClear:!0,onSearch:function(t){var n=t.trim().toLowerCase();e.onSearch(n)},style:{width:200,margin:"0 10px"},enterButton:!0})})})),je=s.a.memo((function(e){var t=Object(u.c)((function(e){return e.find})),n=Object(c.useCallback)((function(n){var r=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));e.setRow(r),r.length&&e.setIsSelectedRow(!0)}),[t]);return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(le,{onSearch:n})})}));function be(){var e=Object(X.a)(["\n   margin-bottom: 10px;\n   margin-top: 10px;\n"]);return be=function(){return e},e}function fe(){var e=Object(X.a)(["\n   min-width: 100vh; \n   display: flex; \n   flex-direction: column;\n   align-items: center; \n   justifyContent: center;\n"]);return fe=function(){return e},e}var Oe=$.a.div(fe()),he=$.a.div(be()),pe=s.a.memo((function(e){var t=Object(c.useCallback)((function(){e.setIsSelectedRow(!1)}),[e.isSelectedRow]);return Object(r.jsxs)(Oe,{children:[Object(r.jsx)(he,{children:Object(r.jsx)(je,{setRow:e.setRow,setIsSelectedRow:e.setIsSelectedRow})}),Object(r.jsx)(ue,{closeTable:t,data:e.data})]})})),xe=(n(136),s.a.memo((function(e){return Object(r.jsxs)("table",{className:"table table-striped",style:{cursor:"pointer"},children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsxs)("th",{onClick:e.onSort.bind(null,"id"),children:["ID"," ","id"===e.sortField?Object(r.jsx)("small",{children:e.sort}):null]}),Object(r.jsxs)("th",{onClick:e.onSort.bind(null,"name"),children:["NAME"," ","name"===e.sortField?Object(r.jsx)("small",{children:e.sort}):null]}),Object(r.jsxs)("th",{onClick:e.onSort.bind(null,"jobsCount"),children:["JOBS COUNT"," ","jobsCount"===e.sortField?Object(r.jsx)("small",{children:e.sort}):null]}),Object(r.jsxs)("th",{onClick:e.onSort.bind(null,"startTime"),children:["START TIME"," ","startTime"===e.sortField?Object(r.jsx)("small",{children:e.sort}):null]}),Object(r.jsxs)("th",{onClick:e.onSort.bind(null,"status"),children:["STATUS"," ","status"===e.sortField?Object(r.jsx)("small",{children:e.sort}):null]}),Object(r.jsx)("th",{}),Object(r.jsx)("th",{})]})}),Object(r.jsx)("tbody",{children:e.data.map((function(t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t.id}),Object(r.jsx)("td",{children:t.name}),Object(r.jsx)("td",{children:t.jobsCount}),Object(r.jsx)("td",{children:t.startTime}),Object(r.jsx)("td",{children:t.status}),Object(r.jsx)("td",{children:Object(r.jsx)(ie,{onClick:function(){return e.onRowSelect(t.id)},text:"jobs"})}),Object(r.jsx)("td",{children:Object(r.jsx)(ie,{onClick:function(){e.delete(t.id)},text:"delete"})})]},t.id)}))})]})}))),me=n(87),ve=n.n(me),Se=s.a.memo((function(e){var t=K(),n=Object(u.c)((function(e){return e.processes})),s=Object(c.useState)("asc"),a=Object(Q.a)(s,2),o=a[0],i=a[1],d=Object(c.useState)("id"),l=Object(Q.a)(d,2),j=l[0],b=l[1],f=Object(u.c)((function(e){return e.jobs})),O=function(){for(var e={id:Object(p.a)(),name:re(),jobsCount:Math.floor(10*Math.random())+1,startTime:(new Date).getTime()},n=e.id,r=[],c=0;c<e.jobsCount;c++){var s=ce(n);r.push(s)}var a=se(r);t(M({process:e,status:a})),t(V({id:n,jobs:r})),t(T()),t(I())};return Object(r.jsxs)(Oe,{children:[Object(r.jsx)(he,{children:Object(r.jsx)(ie,{onClick:O,text:"add process"})}),Object(r.jsx)(xe,{data:n,onSort:function(e){var r=n.concat(),c="asc"===o?"desc":"asc",s=ve.a.orderBy(r,e,c);t(N({process:s})),i(c),b(e)},onRowSelect:function(t){var n=f[t];e.setRow(n),e.setIsSelectedRow(!0)},addProcess:O,delete:function(e){t(E({id:e})),t(W({id:e})),t(T()),t(I())},sort:o,sortField:j})]})})),ge=s.a.memo((function(){var e=K(),t=Object(c.useState)(!0),n=Object(Q.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(null),i=Object(Q.a)(o,2),d=i[0],l=i[1],j=Object(c.useState)(!1),b=Object(Q.a)(j,2),f=b[0],O=b[1],h=Object(u.c)((function(e){return e.jobs})),p=Object(c.useCallback)((function(t){for(var n in t){var r=se(t[n]);e(A({id:n,status:r}))}}),[h]);return Object(c.useEffect)((function(){s&&(e(R()),e(k()),a(!1)),p(h)}),[h]),Object(r.jsx)(r.Fragment,{children:f?Object(r.jsx)(pe,{setIsSelectedRow:O,data:d,setRow:l}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(Se,{setRow:l,setIsSelectedRow:O})})})})),we=s.a.memo((function(){var e=K(),t=Object(c.useState)(!0),n=Object(Q.a)(t,2),s=n[0],a=n[1],o=Object(u.c)((function(e){return e.app.status}));return s&&(e(z({status:"loading"})),setTimeout((function(){e(z({status:"succeeded"}))}),1e3),a(!1)),setTimeout((function(){e(R()),e(k())}),1e5),Object(r.jsx)(r.Fragment,{children:"loading"===o?Object(r.jsx)(ne,{}):Object(r.jsx)(ge,{})})})),ye=s.a.memo((function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(we,{})})}));n(138);o.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(u.a,{store:H,children:Object(r.jsx)(ye,{})})}),document.getElementById("root")),i()},96:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.827e1f7a.chunk.js.map